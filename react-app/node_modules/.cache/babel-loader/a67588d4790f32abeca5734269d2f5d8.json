{"ast":null,"code":"const GET_PRODUCT_REVIEWS = 'get/reviews/product';\nconst EDIT_REVIEW = 'edit/review/product';\nconst GET_ONE_REVIEW = 'get/review/idfromurl';\n\n/* ___________ A C T I O N S   ___________ */\nexport const getReviewsForProduct = reviews => {\n  return {\n    type: GET_PRODUCT_REVIEWS,\n    reviews\n  };\n};\nexport const editReviewAction = review => {\n  return {\n    type: EDIT_REVIEW,\n    review\n  };\n};\n\n/* ___________ T H U N K S   ___________ */\n// Get reviews for a product \nexport const getProductReviewsThunk = productId => async dispatch => {\n  const response = await fetch(`/api/reviews/${productId}`);\n  const reviews = await response.json();\n  dispatch(getReviewsForProduct(reviews));\n};\n\n// Edit a review\nexport const editReviewThunk = reviewId => async dispatch => {\n  const response = await fetch(`/api/reviews/${reviewId}`, {\n    method: 'PUT'\n  });\n  if (response.ok) {\n    const newReview = await response.json();\n    dispatch(editReviewAction(newReview));\n    return newReview;\n  }\n  ;\n};\n\n/* ___________ R E D U C E R ___________ */\nconst reviewsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState = {};\n  switch (action.type) {\n    case GET_PRODUCT_REVIEWS:\n      action.reviews.forEach(ele => newState[ele.id] = ele);\n      return newState;\n    case EDIT_REVIEW:\n      newState = {\n        ...state\n      };\n      newState[action.review.id] = action.review;\n      return newState;\n    default:\n      return state;\n  }\n  ;\n};\nexport default reviewsReducer;","map":{"version":3,"names":["GET_PRODUCT_REVIEWS","EDIT_REVIEW","GET_ONE_REVIEW","getReviewsForProduct","reviews","type","editReviewAction","review","getProductReviewsThunk","productId","dispatch","response","fetch","json","editReviewThunk","reviewId","method","ok","newReview","reviewsReducer","state","action","newState","forEach","ele","id"],"sources":["/home/michaellacey/appacademy/Projects/Bullseye-api-Target/react-app/src/store/review.js"],"sourcesContent":["const GET_PRODUCT_REVIEWS = 'get/reviews/product'\nconst EDIT_REVIEW = 'edit/review/product'\nconst GET_ONE_REVIEW = 'get/review/idfromurl'\n\n\n/* ___________ A C T I O N S   ___________ */\nexport const getReviewsForProduct = (reviews) => {\n    return {\n        type: GET_PRODUCT_REVIEWS,\n        reviews\n    };\n};\nexport const editReviewAction = (review) => {\n    return {\n        type: EDIT_REVIEW,\n        review\n    };\n};\n\n\n\n\n/* ___________ T H U N K S   ___________ */\n// Get reviews for a product \nexport const getProductReviewsThunk = (productId) => async(dispatch) => {\n    const response = await fetch(`/api/reviews/${productId}`);\n    const reviews = await response.json();\n    dispatch(getReviewsForProduct(reviews));\n};\n\n// Edit a review\nexport const editReviewThunk = (reviewId) => async(dispatch) => {\n    const response = await fetch(`/api/reviews/${reviewId}`, {method: 'PUT',})\n    if (response.ok) {\n        const newReview = await response.json();\n        dispatch(editReviewAction(newReview));\n        return newReview\n    };\n};\n\n\n\n/* ___________ R E D U C E R ___________ */\nconst reviewsReducer = ( state = {}, action) => {\n    let newState = {};\n\n    switch (action.type) {\n\n        case GET_PRODUCT_REVIEWS:\n            action.reviews.forEach(ele => newState[ele.id] = ele)\n            return newState\n        \n        case EDIT_REVIEW:\n            newState = { ...state }\n            newState[action.review.id] = action.review\n            return newState\n        \n        default:\n            return state\n\n\n    };\n};\n\nexport default reviewsReducer;"],"mappings":"AAAA,MAAMA,mBAAmB,GAAG,qBAAqB;AACjD,MAAMC,WAAW,GAAG,qBAAqB;AACzC,MAAMC,cAAc,GAAG,sBAAsB;;AAG7C;AACA,OAAO,MAAMC,oBAAoB,GAAIC,OAAO,IAAK;EAC7C,OAAO;IACHC,IAAI,EAAEL,mBAAmB;IACzBI;EACJ,CAAC;AACL,CAAC;AACD,OAAO,MAAME,gBAAgB,GAAIC,MAAM,IAAK;EACxC,OAAO;IACHF,IAAI,EAAEJ,WAAW;IACjBM;EACJ,CAAC;AACL,CAAC;;AAKD;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAIC,SAAS,IAAK,MAAMC,QAAQ,IAAK;EACpE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,gBAAeH,SAAU,EAAC,CAAC;EACzD,MAAML,OAAO,GAAG,MAAMO,QAAQ,CAACE,IAAI,EAAE;EACrCH,QAAQ,CAACP,oBAAoB,CAACC,OAAO,CAAC,CAAC;AAC3C,CAAC;;AAED;AACA,OAAO,MAAMU,eAAe,GAAIC,QAAQ,IAAK,MAAML,QAAQ,IAAK;EAC5D,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,gBAAeG,QAAS,EAAC,EAAE;IAACC,MAAM,EAAE;EAAM,CAAC,CAAC;EAC1E,IAAIL,QAAQ,CAACM,EAAE,EAAE;IACb,MAAMC,SAAS,GAAG,MAAMP,QAAQ,CAACE,IAAI,EAAE;IACvCH,QAAQ,CAACJ,gBAAgB,CAACY,SAAS,CAAC,CAAC;IACrC,OAAOA,SAAS;EACpB;EAAC;AACL,CAAC;;AAID;AACA,MAAMC,cAAc,GAAG,YAAyB;EAAA,IAAvBC,KAAK,uEAAG,CAAC,CAAC;EAAA,IAAEC,MAAM;EACvC,IAAIC,QAAQ,GAAG,CAAC,CAAC;EAEjB,QAAQD,MAAM,CAAChB,IAAI;IAEf,KAAKL,mBAAmB;MACpBqB,MAAM,CAACjB,OAAO,CAACmB,OAAO,CAACC,GAAG,IAAIF,QAAQ,CAACE,GAAG,CAACC,EAAE,CAAC,GAAGD,GAAG,CAAC;MACrD,OAAOF,QAAQ;IAEnB,KAAKrB,WAAW;MACZqB,QAAQ,GAAG;QAAE,GAAGF;MAAM,CAAC;MACvBE,QAAQ,CAACD,MAAM,CAACd,MAAM,CAACkB,EAAE,CAAC,GAAGJ,MAAM,CAACd,MAAM;MAC1C,OAAOe,QAAQ;IAEnB;MACI,OAAOF,KAAK;EAAA;EAGnB;AACL,CAAC;AAED,eAAeD,cAAc"},"metadata":{},"sourceType":"module"}