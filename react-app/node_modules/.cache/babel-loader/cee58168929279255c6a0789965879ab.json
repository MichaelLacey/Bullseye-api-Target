{"ast":null,"code":"const GET_PRODUCT_REVIEWS = 'get/reviews/product';\nconst EDIT_REVIEW = 'edit/review/product';\nconst GET_ONE_REVIEW = 'get/review/idfromurl';\nconst DELETE_REVIEW = 'delete/review';\nconst ADD_REVIEW = 'add/review';\n\n/* ___________ A C T I O N S   ___________ */\nexport const getReviewsForProduct = reviews => {\n  return {\n    type: GET_PRODUCT_REVIEWS,\n    reviews\n  };\n};\nexport const editReviewAction = review => {\n  return {\n    type: EDIT_REVIEW,\n    review\n  };\n};\nexport const getOneReview = review => {\n  return {\n    type: GET_ONE_REVIEW,\n    review\n  };\n};\nexport const deleteReview = reviewId => {\n  return {\n    type: DELETE_REVIEW,\n    reviewId\n  };\n};\nexport const addReviewAction = review => {\n  return {\n    type: ADD_REVIEW,\n    review\n  };\n};\n\n/* ___________ T H U N K S   ___________ */\n\n// Get reviews for a product \nexport const getProductReviewsThunk = productId => async dispatch => {\n  const response = await fetch(`/api/reviews/${productId}`);\n  const reviews = await response.json();\n  dispatch(getReviewsForProduct(reviews));\n};\n\n// Edit a review\nexport const editReviewThunk = (review, reviewId) => async dispatch => {\n  const {\n    comment,\n    rating\n  } = review;\n  const response = await fetch(`/api/reviews/${reviewId}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      comment,\n      rating\n    })\n  });\n  if (response.ok) {\n    const newReview = await response.json();\n    dispatch(editReviewAction(newReview));\n    return newReview;\n  }\n  ;\n};\n// Delete a review for a product\nexport const deleteReviewThunk = reviewId => async dispatch => {\n  const response = await fetch(`/api/reviews/delete/${reviewId}`, {\n    method: 'DELETE'\n  });\n  if (response.ok) dispatch(deleteReview(reviewId));\n};\n\n// Get one review by url review id\nexport const getOneReviewThunk = reviewId => async dispatch => {\n  const response = await fetch(`/api/reviews/get/${reviewId}`);\n  const review = await response.json();\n  dispatch(getOneReview(review));\n  return review;\n};\n// Create a review\nexport const createReviewThunk = (review, productId) => async dispatch => {\n  const {\n    user_id,\n    comment,\n    rating\n  } = review;\n  console.log('userId', user_id);\n  const response = await fetch(`/api/reviews/${productId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      user_id,\n      comment,\n      rating\n    })\n  });\n  if (response.ok) {\n    console.log('in the review response.ok');\n    const newReview = await response.json();\n    dispatch(addReviewAction(newReview));\n    return newReview;\n  }\n  ;\n};\n/* ___________ R E D U C E R ___________ */\nconst reviewsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState = {};\n  switch (action.type) {\n    case GET_PRODUCT_REVIEWS:\n      action.reviews.forEach(ele => newState[ele.id] = ele);\n      return newState;\n    case EDIT_REVIEW:\n      newState = {\n        ...state\n      };\n      newState[action.review.id] = action.review;\n      return newState;\n    case GET_ONE_REVIEW:\n      return action.review;\n    case DELETE_REVIEW:\n      newState = {\n        ...state\n      };\n      delete newState[action.reviewId];\n      return newState;\n    case ADD_REVIEW:\n      newState = {\n        ...state\n      };\n      newState[action.review.id] = action.review;\n      return newState;\n    default:\n      return state;\n  }\n  ;\n};\nexport default reviewsReducer;","map":{"version":3,"names":["GET_PRODUCT_REVIEWS","EDIT_REVIEW","GET_ONE_REVIEW","DELETE_REVIEW","ADD_REVIEW","getReviewsForProduct","reviews","type","editReviewAction","review","getOneReview","deleteReview","reviewId","addReviewAction","getProductReviewsThunk","productId","dispatch","response","fetch","json","editReviewThunk","comment","rating","method","headers","body","JSON","stringify","ok","newReview","deleteReviewThunk","getOneReviewThunk","createReviewThunk","user_id","console","log","reviewsReducer","state","action","newState","forEach","ele","id"],"sources":["/home/michaellacey/appacademy/Projects/Bullseye-api-Target/react-app/src/store/review.js"],"sourcesContent":["const GET_PRODUCT_REVIEWS = 'get/reviews/product'\nconst EDIT_REVIEW = 'edit/review/product'\nconst GET_ONE_REVIEW = 'get/review/idfromurl'\nconst DELETE_REVIEW = 'delete/review'\nconst ADD_REVIEW = 'add/review'\n\n/* ___________ A C T I O N S   ___________ */\nexport const getReviewsForProduct = (reviews) => {\n    return {\n        type: GET_PRODUCT_REVIEWS,\n        reviews\n    };\n};\n\nexport const editReviewAction = (review) => {\n    return {\n        type: EDIT_REVIEW,\n        review\n    };\n};\n\nexport const getOneReview = (review) => {\n    return {\n        type: GET_ONE_REVIEW,\n        review\n    };\n};\nexport const deleteReview = (reviewId) => {\n    return {\n        type: DELETE_REVIEW,\n        reviewId\n    }\n}\nexport const addReviewAction = (review) => {\n    return {\n        type: ADD_REVIEW,\n        review\n    }\n}\n\n\n/* ___________ T H U N K S   ___________ */\n\n// Get reviews for a product \nexport const getProductReviewsThunk = (productId) => async (dispatch) => {\n    const response = await fetch(`/api/reviews/${productId}`);\n    const reviews = await response.json();\n    dispatch(getReviewsForProduct(reviews));\n};\n\n// Edit a review\nexport const editReviewThunk = (review, reviewId) => async (dispatch) => {\n    const { comment, rating } = review;\n\n    const response = await fetch(`/api/reviews/${reviewId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(\n            {\n                comment,\n                rating\n            }\n        )\n    })\n    if (response.ok) {\n        const newReview = await response.json();\n\n        dispatch(editReviewAction(newReview));\n        return newReview\n    };\n};\n// Delete a review for a product\nexport const deleteReviewThunk = (reviewId) => async (dispatch) => {\n    const response = await fetch(`/api/reviews/delete/${reviewId}`, { method: 'DELETE' });\n    if (response.ok) dispatch(deleteReview(reviewId))\n};\n\n// Get one review by url review id\nexport const getOneReviewThunk = (reviewId) => async (dispatch) => {\n    const response = await fetch(`/api/reviews/get/${reviewId}`);\n    const review = await response.json();\n    dispatch(getOneReview(review));\n    return review;\n};\n// Create a review\nexport const createReviewThunk = (review, productId) => async (dispatch) => {\n    const { user_id, comment, rating } = review;\n    console.log('userId', user_id)\n    const response = await fetch(`/api/reviews/${productId}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            user_id,\n            comment,\n            rating,\n        })\n    });\n\n    if (response.ok) {\n        console.log('in the review response.ok')\n        const newReview = await response.json();\n        dispatch(addReviewAction(newReview));\n        return newReview;\n    };\n};\n/* ___________ R E D U C E R ___________ */\nconst reviewsReducer = (state = {}, action) => {\n    let newState = {};\n\n    switch (action.type) {\n\n        case GET_PRODUCT_REVIEWS:\n            action.reviews.forEach(ele => newState[ele.id] = ele)\n            return newState\n\n        case EDIT_REVIEW:\n            newState = { ...state }\n            newState[action.review.id] = action.review\n            return newState\n\n        case GET_ONE_REVIEW:\n            return action.review\n\n        case DELETE_REVIEW:\n            newState = { ...state }\n            delete newState[action.reviewId]\n            return newState\n\n        case ADD_REVIEW:\n            newState = { ...state }\n            newState[action.review.id] = action.review\n            return newState\n\n        default:\n            return state\n\n\n    };\n};\n\nexport default reviewsReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}