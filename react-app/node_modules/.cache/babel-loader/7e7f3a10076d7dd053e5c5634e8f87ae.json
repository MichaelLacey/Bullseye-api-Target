{"ast":null,"code":"const GET_USERS_CART = 'get/cart';\nconst ADD_TO_CART = 'add/cart';\nconst DELETE_TO_CART = 'delete/cart';\nconst CHECKOUT_CART = 'checkout/cart';\nconst CLEARPRODUCTCART = 'spot/clearProduct';\n\n/* ___________ A C T I O N S   ___________ */\n// Get cart items\nexport const getCartItems = products => {\n  return {\n    type: GET_USERS_CART,\n    products\n  };\n};\n// Add a product to a cart\nexport const addCartItem = product => {\n  return {\n    type: ADD_TO_CART,\n    product\n  };\n};\n\n// Remove a product to a cart\nexport const deleteCartItem = productId => {\n  return {\n    type: DELETE_TO_CART,\n    productId\n  };\n};\n// Checkout a cart \nexport const checkoutCartAction = () => {\n  return {\n    type: CHECKOUT_CART\n  };\n};\n\n// Clear state or empty it in the return of a useeffect so its empty upon leaving the component\nexport const clearProductAction = () => {\n  return {\n    type: CLEARPRODUCT\n  };\n};\n\n/* ___________ T H U N K S   ___________ */\n\n// Get users products in cart\nexport const getUsersCartThunk = () => async dispatch => {\n  const response = await fetch('/api/cart');\n  const cart = await response.json();\n  dispatch(getCartItems(cart));\n};\n\n// Add a product to a users cart \nexport const addToCartThunk = productId => async dispatch => {\n  const response = await fetch(`/api/cart/add/${productId}`, {\n    method: 'POST'\n  });\n  if (response.ok) {\n    const product = await response.json();\n    dispatch(addCartItem(product[product.length - 1]));\n    return product;\n  }\n  ;\n};\n\n// Remove a product from a users cart\nexport const removeFromCartThunk = productId => async dispatch => {\n  const response = await fetch(`/api/cart/delete/${productId}`, {\n    method: 'DELETE'\n  });\n  if (response.ok) dispatch(deleteCartItem(productId));\n};\n// Checkout the cart\nexport const checkoutCartThunK = () => async dispatch => {\n  const response = await fetch(`/api/cart/checkout`);\n  // if (response.ok) \n  dispatch(checkoutCartAction);\n};\n\n/* ___________ R E D U C E R ___________ */\nconst cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState = {};\n  switch (action.type) {\n    case GET_USERS_CART:\n      action.products.forEach(ele => newState[ele.id] = ele);\n      return newState;\n    case ADD_TO_CART:\n      newState = {\n        ...state\n      };\n      newState[action.product.id] = action.product;\n      return newState;\n    case DELETE_TO_CART:\n      newState = {\n        ...state\n      };\n      delete newState[action.productId];\n      return newState;\n    case CHECKOUT_CART:\n      newState = {};\n      return newState;\n    case CLEARPRODUCTCART:\n      return newState;\n    default:\n      return state;\n  }\n  ;\n};\nexport default cartReducer;","map":{"version":3,"names":["GET_USERS_CART","ADD_TO_CART","DELETE_TO_CART","CHECKOUT_CART","CLEARPRODUCTCART","getCartItems","products","type","addCartItem","product","deleteCartItem","productId","checkoutCartAction","clearProductAction","CLEARPRODUCT","getUsersCartThunk","dispatch","response","fetch","cart","json","addToCartThunk","method","ok","length","removeFromCartThunk","checkoutCartThunK","cartReducer","state","action","newState","forEach","ele","id"],"sources":["/home/michaellacey/appacademy/Projects/Bullseye-api-Target/react-app/src/store/cart.js"],"sourcesContent":["const GET_USERS_CART = 'get/cart'\nconst ADD_TO_CART = 'add/cart'\nconst DELETE_TO_CART = 'delete/cart'\nconst CHECKOUT_CART = 'checkout/cart'\nconst CLEARPRODUCTCART = 'spot/clearProduct'\n\n/* ___________ A C T I O N S   ___________ */\n// Get cart items\nexport const getCartItems = (products) => {\n    return {\n        type: GET_USERS_CART,\n        products\n    };\n};\n// Add a product to a cart\nexport const addCartItem = (product) => {\n    return {\n        type: ADD_TO_CART,\n        product\n    };\n};\n\n// Remove a product to a cart\nexport const deleteCartItem = (productId) => {\n    return {\n        type: DELETE_TO_CART,\n        productId\n    };\n};\n// Checkout a cart \nexport const checkoutCartAction = () => {\n    return {\n        type: CHECKOUT_CART\n    };\n};\n\n// Clear state or empty it in the return of a useeffect so its empty upon leaving the component\nexport const clearProductAction = () => {\n    return {\n      type: CLEARPRODUCT,\n    };\n  };\n\n\n/* ___________ T H U N K S   ___________ */\n\n// Get users products in cart\nexport const getUsersCartThunk = () => async (dispatch) => {\n    const response = await fetch('/api/cart');\n    const cart = await response.json();\n    dispatch(getCartItems(cart));\n};\n\n// Add a product to a users cart \nexport const addToCartThunk = (productId) => async (dispatch) => {\n    const response = await fetch(`/api/cart/add/${productId}`, { method: 'POST' });\n\n    if (response.ok) {\n        const product = await response.json();\n        dispatch(addCartItem(product[product.length - 1]))\n        return product\n    };\n};\n\n// Remove a product from a users cart\nexport const removeFromCartThunk = (productId) => async (dispatch) => {\n    const response = await fetch(`/api/cart/delete/${productId}`, { method: 'DELETE' });\n\n    if (response.ok) dispatch(deleteCartItem(productId));\n};\n// Checkout the cart\nexport const checkoutCartThunK = () => async (dispatch) => {\n    const response = await fetch(`/api/cart/checkout`);\n    // if (response.ok) \n    dispatch(checkoutCartAction)\n};\n\n/* ___________ R E D U C E R ___________ */\nconst cartReducer = (state = {}, action) => {\n    let newState = {};\n    switch (action.type) {\n\n        case GET_USERS_CART:\n            action.products.forEach(ele => newState[ele.id] = ele)\n            return newState\n\n        case ADD_TO_CART:\n            newState = { ...state }\n            newState[action.product.id] = action.product\n            return newState\n\n        case DELETE_TO_CART:\n            newState = { ...state }\n            delete newState[action.productId]\n            return newState\n\n        case CHECKOUT_CART:\n            newState = {}\n            return newState\n        \n        case CLEARPRODUCTCART:\n            return newState\n\n        default:\n            return state;\n    };\n};\n\nexport default cartReducer;"],"mappings":"AAAA,MAAMA,cAAc,GAAG,UAAU;AACjC,MAAMC,WAAW,GAAG,UAAU;AAC9B,MAAMC,cAAc,GAAG,aAAa;AACpC,MAAMC,aAAa,GAAG,eAAe;AACrC,MAAMC,gBAAgB,GAAG,mBAAmB;;AAE5C;AACA;AACA,OAAO,MAAMC,YAAY,GAAIC,QAAQ,IAAK;EACtC,OAAO;IACHC,IAAI,EAAEP,cAAc;IACpBM;EACJ,CAAC;AACL,CAAC;AACD;AACA,OAAO,MAAME,WAAW,GAAIC,OAAO,IAAK;EACpC,OAAO;IACHF,IAAI,EAAEN,WAAW;IACjBQ;EACJ,CAAC;AACL,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAIC,SAAS,IAAK;EACzC,OAAO;IACHJ,IAAI,EAAEL,cAAc;IACpBS;EACJ,CAAC;AACL,CAAC;AACD;AACA,OAAO,MAAMC,kBAAkB,GAAG,MAAM;EACpC,OAAO;IACHL,IAAI,EAAEJ;EACV,CAAC;AACL,CAAC;;AAED;AACA,OAAO,MAAMU,kBAAkB,GAAG,MAAM;EACpC,OAAO;IACLN,IAAI,EAAEO;EACR,CAAC;AACH,CAAC;;AAGH;;AAEA;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAM,MAAOC,QAAQ,IAAK;EACvD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,WAAW,CAAC;EACzC,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;EAClCJ,QAAQ,CAACX,YAAY,CAACc,IAAI,CAAC,CAAC;AAChC,CAAC;;AAED;AACA,OAAO,MAAME,cAAc,GAAIV,SAAS,IAAK,MAAOK,QAAQ,IAAK;EAC7D,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,iBAAgBP,SAAU,EAAC,EAAE;IAAEW,MAAM,EAAE;EAAO,CAAC,CAAC;EAE9E,IAAIL,QAAQ,CAACM,EAAE,EAAE;IACb,MAAMd,OAAO,GAAG,MAAMQ,QAAQ,CAACG,IAAI,EAAE;IACrCJ,QAAQ,CAACR,WAAW,CAACC,OAAO,CAACA,OAAO,CAACe,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;IAClD,OAAOf,OAAO;EAClB;EAAC;AACL,CAAC;;AAED;AACA,OAAO,MAAMgB,mBAAmB,GAAId,SAAS,IAAK,MAAOK,QAAQ,IAAK;EAClE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,oBAAmBP,SAAU,EAAC,EAAE;IAAEW,MAAM,EAAE;EAAS,CAAC,CAAC;EAEnF,IAAIL,QAAQ,CAACM,EAAE,EAAEP,QAAQ,CAACN,cAAc,CAACC,SAAS,CAAC,CAAC;AACxD,CAAC;AACD;AACA,OAAO,MAAMe,iBAAiB,GAAG,MAAM,MAAOV,QAAQ,IAAK;EACvD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,oBAAmB,CAAC;EAClD;EACAF,QAAQ,CAACJ,kBAAkB,CAAC;AAChC,CAAC;;AAED;AACA,MAAMe,WAAW,GAAG,YAAwB;EAAA,IAAvBC,KAAK,uEAAG,CAAC,CAAC;EAAA,IAAEC,MAAM;EACnC,IAAIC,QAAQ,GAAG,CAAC,CAAC;EACjB,QAAQD,MAAM,CAACtB,IAAI;IAEf,KAAKP,cAAc;MACf6B,MAAM,CAACvB,QAAQ,CAACyB,OAAO,CAACC,GAAG,IAAIF,QAAQ,CAACE,GAAG,CAACC,EAAE,CAAC,GAAGD,GAAG,CAAC;MACtD,OAAOF,QAAQ;IAEnB,KAAK7B,WAAW;MACZ6B,QAAQ,GAAG;QAAE,GAAGF;MAAM,CAAC;MACvBE,QAAQ,CAACD,MAAM,CAACpB,OAAO,CAACwB,EAAE,CAAC,GAAGJ,MAAM,CAACpB,OAAO;MAC5C,OAAOqB,QAAQ;IAEnB,KAAK5B,cAAc;MACf4B,QAAQ,GAAG;QAAE,GAAGF;MAAM,CAAC;MACvB,OAAOE,QAAQ,CAACD,MAAM,CAAClB,SAAS,CAAC;MACjC,OAAOmB,QAAQ;IAEnB,KAAK3B,aAAa;MACd2B,QAAQ,GAAG,CAAC,CAAC;MACb,OAAOA,QAAQ;IAEnB,KAAK1B,gBAAgB;MACjB,OAAO0B,QAAQ;IAEnB;MACI,OAAOF,KAAK;EAAC;EACpB;AACL,CAAC;AAED,eAAeD,WAAW"},"metadata":{},"sourceType":"module"}